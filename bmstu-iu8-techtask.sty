\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{bmstu-iu8-techtask}[2025/02/18 V0.2]

%\RequirePackage{BMSTU-IU8}
\RequirePackage{IU8-01-base}
\RequirePackage{IU8-02-construction}
\RequirePackage{IU8-03-numbering}
\RequirePackage{IU8-04-section-numbering}
\RequirePackage{IU8-05-figures}
\RequirePackage{IU8-06-tables}
\RequirePackage{IU8-07-footnotes}
\RequirePackage{IU8-08-formulas}
\RequirePackage{IU8-09-cites}
\RequirePackage{IU8-10-titlepage}
\RequirePackage{IU8-11-performers}
\RequirePackage{IU8-12-abstract}
\RequirePackage{IU8-13-contents}
\RequirePackage{IU8-14-terms-and-definitions}
\RequirePackage{IU8-15-list-of-abbreviations}
\RequirePackage{IU8-16-references}
\RequirePackage{IU8-17-appendices}
\RequirePackage{IU8-18-extra}
\RequirePackage{IU8-19-counters}
\RequirePackage{IU8-20-listing}
\RequirePackage{IU8-21-math}
\RequirePackage{IU8-22-algorithms}

\newcounter{pagebackupctr}


\providecommand{\@ensuredby}{qwerty}
\newcommand{\ensuredby}[1]{\gdef\@ensuredby{qwerty}}

\providecommand{\@facultydepartment}{\fontsize{12pt}{14pt} \selectfont \noindent
    \begin{tabular}{lp{0.7\linewidth}}
        ФАКУЛЬТЕТ \tabto{3cm} & \@faculty \\
        КАФЕДРА \tabto{3cm} & \@department
    \end{tabular}}
\newcommand{\nofacdep}{\gdef\@facultydepartment{~}}


\newcommand{\maketaskBMSTUHeader}{
    \noindent\begin{minipage}{0.05\textwidth}
        \includegraphics[scale=0.4]{inc/bmstu.png}
    \end{minipage}
    \hfill
    \begin{minipage}{0.85\textwidth}\raggedleft
        \begin{center}
            \fontsize{10pt}{0.3\baselineskip}\selectfont 
            \textbf{Министерство науки и высшего образования 
                Российской Федерации \\ 
                Федеральное государственное автономное образовательное 
                учреждение \\ 
                высшего образования \\ 
                <<Московский государственный технический университет \\ 
                имени Н. Э. Баумана \\ 
                (национальный исследовательский университет)>> \\ 
                (МГТУ им. Н. Э. Баумана)
            }
        \end{center}
    \end{minipage}
    \begin{center}
        \fontsize{12pt}{0.1\baselineskip}\selectfont
        \noindent\makebox[\linewidth]{\rule{\textwidth}{2pt}} 
        \makebox[\linewidth]{\rule{\textwidth}{1pt}}
    \end{center}
    \@facultydepartment
}

\newcommand{\fillOrdinaryTechTask}{
	\@ensuredby

	\noindent\begin{center}
		\centering
		{\bfseries\fontsize{18pt}{25pt}\selectfont ЗАДАНИЕ}
	\end{center}
}

\providecommand{\fillTechTask}{\@latex@error@no@line{Tech Task Package: Unsupported documentclass option. Change document class option or remove \noexpand\techTask macro from document.}}

%\DeclareOption{diploma}{
%    \def\fillTechTask{\fillDiplomaTechTask}
%}
%\DeclareOption{research}{
%    \def\fillTechTask{\fillResearchTechTask}
%}
%\DeclareOption{practice}{
%	\def\fillTechTask{\fillPracticeTechTask}
%}
\DeclareOption{ordinary}{
	\gdef\fillTechTask{\fillOrdinaryTechTask}
}

\ProcessOptions

\providecommand{\@footercontents}{~}
\newcommand{\footercontents}[1]{\gdef\@footercontents{#1}}

\fancypagestyle{techtask}{
  \fancyfoot[L]{\fontsize{10pt}{14pt}\selectfont \@footercontents}
  \renewcommand{\headrulewidth}{0pt}
  \fancyhead{}
}


\newcommand{\techtask}{
    \thispagestyle{techtask}
    \setcounter{pagebackupctr}{\thepage}
    \stepcounter{pagebackupctr}
    \pagenumbering{gobble}
	\maketaskBMSTUHeader
	\fillTechTask
	\clearpage
	\pagenumbering{arabic}
	\setcounter{page}{\thepagebackupctr}
}
